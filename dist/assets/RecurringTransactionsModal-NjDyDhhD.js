import{r as g,I as n,T as N,j as e,e as C}from"./index-CX3uHzjl.js";const A=({onSave:f,onClose:p,accounts:m,transactionToEdit:s})=>{const h=g.useMemo(()=>({number:m.length>0?m[0].number:0,name:m.length>0?m[0].name:""}),[m]),j=g.useCallback(()=>({dayOfMonth:1,type:N.SAIDA,accountNumber:h.number,accountName:h.name,description:"",amount:0,payee:"",paymentMethod:"pix",irCategory:n.NAO_DEDUTIVEL,requiresReceipt:!1}),[h]),[r,x]=g.useState(j());g.useEffect(()=>{if(s){const t={...s,irCategory:s.irCategory??n.NAO_DEDUTIVEL,requiresReceipt:s.requiresReceipt??!1},{id:d,...i}=t;x(i)}else x(j())},[s,m]);const l=t=>{const{name:d,value:i}=t.target;if(d==="irCategory"){x(c=>({...c,irCategory:i}));return}if(d==="requiresReceipt"){const c=t.target.checked;x(k=>({...k,requiresReceipt:c}));return}let y=i;d==="amount"?y=parseFloat(i)||0:(d==="dayOfMonth"||d==="accountNumber")&&(y=parseInt(i,10));const b={...r,[d]:y};if(d==="accountNumber"){const c=m.find(k=>k.number===b.accountNumber);b.accountName=(c==null?void 0:c.name)||""}x(b)},u=t=>{t.preventDefault(),f({...r,id:(s==null?void 0:s.id)||C()}),p()};return e.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-gray-800 rounded-b-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:[s?"Editar":"Adicionar"," Conta Fixa"]}),e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"dayOfMonth",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Dia do Vencimento"}),e.jsx("input",{type:"number",name:"dayOfMonth",min:"1",max:"31",value:r.dayOfMonth,onChange:l,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm sm:text-sm dark:bg-gray-700 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Tipo"}),e.jsxs("select",{name:"type",value:r.type,onChange:l,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm sm:text-sm dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:N.SAIDA,children:"Saída"}),e.jsx("option",{value:N.ENTRADA,children:"Entrada"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"accountNumber",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Conta"}),e.jsx("select",{name:"accountNumber",value:r.accountNumber,onChange:l,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm sm:text-sm dark:bg-gray-700 dark:text-white",children:m.map(t=>e.jsxs("option",{value:t.number,children:[t.number," - ",t.name]},t.id))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Histórico"}),e.jsx("input",{type:"text",name:"description",value:r.description,onChange:l,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm sm:text-sm dark:bg-gray-700 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Valor Fixo"}),e.jsx("input",{type:"number",step:"0.01",name:"amount",value:r.amount,onChange:l,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm sm:text-sm dark:bg-gray-700 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"payee",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Fornecedor/Comprador"}),e.jsx("input",{type:"text",name:"payee",value:r.payee,onChange:l,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm sm:text-sm dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"paymentMethod",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Forma de Pagamento"}),e.jsx("input",{type:"text",name:"paymentMethod",value:r.paymentMethod,onChange:l,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm sm:text-sm dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{className:"border rounded-md p-3 mt-2 bg-gray-100 dark:bg-gray-900/40 space-y-3",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-700 dark:text-gray-200 uppercase tracking-wide",children:"Imposto de Renda (padrão desta conta fixa)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"irCategory",className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Categoria para IR"}),e.jsxs("select",{name:"irCategory",value:r.irCategory??n.NAO_DEDUTIVEL,onChange:l,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm text-xs sm:text-sm dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:n.NAO_DEDUTIVEL,children:"Não dedutível / Geral"}),e.jsx("option",{value:n.SAUDE,children:"Saúde"}),e.jsx("option",{value:n.EDUCACAO,children:"Educação"}),e.jsx("option",{value:n.LIVRO_CAIXA,children:"Livro Caixa"}),e.jsx("option",{value:n.CARNE_LEAO,children:"Carnê-Leão"}),e.jsx("option",{value:n.BEM_DIREITO,children:"Bens e direitos"}),e.jsx("option",{value:n.ALUGUEL,children:"Aluguel"}),e.jsx("option",{value:n.ATIVIDADE_RURAL,children:"Atividade Rural"}),e.jsx("option",{value:n.OUTRA,children:"Outros"})]})]}),e.jsx("div",{className:"flex items-center mt-2 md:mt-6",children:e.jsxs("label",{className:"inline-flex items-center text-xs sm:text-sm text-gray-700 dark:text-gray-200",children:[e.jsx("input",{type:"checkbox",name:"requiresReceipt",checked:!!r.requiresReceipt,onChange:l,className:"form-checkbox h-4 w-4 text-indigo-600"}),e.jsx("span",{className:"ml-2",children:"Normalmente exige nota/comprovante"})]})})]}),e.jsx("p",{className:"text-[11px] text-gray-500 dark:text-gray-400",children:"Essas configurações serão usadas como padrão quando você gerar os lançamentos mensais a partir desta conta fixa, ajudando a organizar o relatório de Imposto de Renda."})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[e.jsx("button",{type:"button",onClick:p,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-gray-200 dark:bg-gray-600 rounded-md hover:bg-gray-300 dark:hover:bg-gray-500",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700",children:"Salvar Conta"})]})]})]})},I=({isOpen:f,onClose:p,accounts:m,recurringTransactions:s,setRecurringTransactions:h,onGenerate:j,onSaveItem:r,onDeleteItem:x})=>{const[l,u]=g.useState(!1),[t,d]=g.useState(null),[i,y]=g.useState({month:new Date().getMonth()+1,year:new Date().getFullYear()});if(!f)return null;const b=a=>{d(a),u(!0)},c=()=>{d(null),u(!0)},k=a=>{h(t?o=>o.map(v=>v.id===a.id?a:v):o=>[...o,a]),r(a),u(!1),d(null)},w=()=>{j(i.month,i.year)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-start sm:items-center p-2 sm:p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl my-4 sm:my-8",children:[e.jsxs("div",{className:"p-4 sm:p-6 border-b dark:border-gray-700 flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white",children:"Gerenciar Contas Fixas"}),e.jsx("button",{onClick:p,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-2xl",children:"×"})]}),e.jsxs("div",{className:"p-4 sm:p-6 space-y-4",children:[e.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 p-4 rounded-md space-y-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between space-y-3 sm:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 w-full sm:w-auto",children:[e.jsx("select",{value:i.month,onChange:a=>y(o=>({...o,month:parseInt(a.target.value)})),className:"p-2 border rounded-md dark:bg-gray-600 dark:border-gray-500 w-1/2 sm:w-auto",children:Array.from({length:12},(a,o)=>o+1).map(a=>e.jsx("option",{value:a,children:a.toString().padStart(2,"0")},a))}),e.jsx("select",{value:i.year,onChange:a=>y(o=>({...o,year:parseInt(a.target.value)})),className:"p-2 border rounded-md dark:bg-gray-600 dark:border-gray-500 w-1/2 sm:w-auto",children:Array.from({length:10},(a,o)=>new Date().getFullYear()-5+o).map(a=>e.jsx("option",{value:a,children:a},a))})]}),e.jsx("button",{onClick:w,className:"w-full sm:w-auto px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700",children:"Gerar Lançamentos"})]})}),e.jsx("div",{className:"max-h-60 overflow-y-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700 text-sm",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Descrição"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Conta"}),e.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Valor"}),e.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Ações"})]})}),e.jsxs("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:[s.map(a=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-gray-900 dark:text-gray-100",children:a.description}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-gray-500 dark:text-gray-300",children:a.accountName}),e.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-right text-gray-900 dark:text-gray-100",children:["R$ ",a.amount.toFixed(2)]}),e.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[e.jsx("button",{onClick:()=>b(a),className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:"Editar"}),e.jsx("button",{onClick:()=>x(a.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:"Excluir"})]})]},a.id)),s.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-3 py-4 text-center text-gray-500 dark:text-gray-400 text-sm",children:"Nenhuma conta fixa cadastrada ainda."})})]})]})}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:c,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700",children:"+ Nova conta fixa"}),e.jsx("button",{onClick:p,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600",children:"Fechar"})]}),l&&e.jsx(A,{onSave:k,onClose:()=>u(!1),accounts:m,transactionToEdit:t})]})]})})};export{I as default};
